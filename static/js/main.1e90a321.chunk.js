(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{108:function(e,t,r){},110:function(e,t,r){},111:function(e,t,r){},144:function(e,t,r){},155:function(e,t,r){"use strict";r.r(t);var n,c=r(6),a=(r(0),r(19)),i=r.n(a),s=(r(108),r(109),r(70)),o=r(16),d=(r(110),r(111),r(158)),u=r(39),l=r(3),j=r(55),h=r.n(j),b=r(60),p=r(46),O=Object(p.b)("weatherSlice/fetchWeather",function(){var e=Object(b.a)(h.a.mark((function e(t,r){var n,c,a,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,fetch("https://api.openweathermap.org/data/2.5/forecast?appid=ce1fe59a97e1d3ca691fd2a7a7a2db8a&q=".concat(t,"&units=metric&lang=ru"));case 4:if(!(c=e.sent).ok){e.next=11;break}return e.next=8,c.json();case 8:return a=e.sent,i=a.list.reduce((function(e,t){return e.concat({id:Object(p.d)(),temp:t.main.temp,description:t.weather[0].description,date:t.dt_txt})}),[]),e.abrupt("return",{data:i,city:t});case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",n({error:e.t0.message,city:t}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,r){return e.apply(this,arguments)}}()),f=Object(p.c)({name:"weatherSlice",initialState:{data:[],status:"idle",error:null,history:[]},extraReducers:(n={},Object(l.a)(n,O.pending,(function(e,t){e.status="pending"})),Object(l.a)(n,O.fulfilled,(function(e,t){e.status="idle",e.data=t.payload.data,e.history.unshift({history:t.payload.city,id:Object(p.d)()})})),Object(l.a)(n,O.rejected,(function(e,t){e.data=[],e.status="failed",e.history.unshift({history:t.payload.city,id:Object(p.d)()}),e.error=t.payload.error})),n)}),x=function(e){return e.weatherSlice.data},m=function(e){return e.weatherSlice.history},v=function(e){return e.weatherSlice.status},y=f.reducer,w=d.a.Option;function g(){var e=Object(u.b)(),t=Object(u.c)(v);return Object(c.jsxs)(d.a,{disabled:"pending"===t,className:"select",showSearch:!0,style:{width:200},placeholder:"Select city",optionFilterProp:"children",onChange:function(t){return e(O(t))},filterOption:function(e,t){return(null===t||void 0===t?void 0:t.children.toLowerCase().indexOf(e.toLowerCase()))>=0},children:[Object(c.jsx)(w,{value:"moscow",children:"Moscow"}),Object(c.jsx)(w,{value:"yekaterinburg",children:"Yekaterinburg"}),Object(c.jsx)(w,{value:"novosibirsk",children:"Novosibirsk"}),Object(c.jsx)(w,{value:"kazan",children:"Kazan"})]})}var k=r(159),N=function(e){var t=e.list;return Object(c.jsx)("div",{children:t.map((function(e){return Object(c.jsx)("div",{className:"weather-item",children:Object(c.jsxs)(k.b,{children:[Object(c.jsx)("div",{className:"date",children:e.date}),Object(c.jsx)("div",{className:"temp",children:e.temp}),Object(c.jsx)("div",{className:"description",children:e.description})]})},e.id)}))})};var S=function(){var e=Object(u.c)(x);return Object(c.jsxs)("div",{className:"page",children:[Object(c.jsx)(g,{}),Object(c.jsx)(N,{list:e})]})},C=(r(144),function(e){var t=e.list;return Object(c.jsx)("div",{children:t.map((function(e){return Object(c.jsx)("div",{className:"weather-item",children:e.history},e.id)}))})});var z=function(){var e=Object(u.c)(m);return Object(c.jsx)("div",{className:"page",children:Object(c.jsx)(C,{list:e})})},I=r(156);function H(){var e=Object(o.g)();return Object(c.jsxs)(I.a,{className:"menu",mode:"horizontal",children:[Object(c.jsx)(I.a.Item,{onClick:function(){return e.push("/home")},children:"Home"},"mail"),Object(c.jsx)(I.a.Item,{onClick:function(){return e.push("/history")},children:"History"},"app")]})}var J=function(){return Object(c.jsx)("div",{className:"app",children:Object(c.jsxs)(s.a,{basename:"/weather-ts",children:[Object(c.jsx)(H,{}),Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{exact:!0,path:"/home",render:function(){return Object(c.jsx)(S,{})}}),Object(c.jsx)(o.b,{path:"/history",render:function(){return Object(c.jsx)(z,{})}}),Object(c.jsx)(o.a,{to:"/home"})]})]})})},L=Object(p.a)({reducer:{weatherSlice:y},devTools:!1});i.a.render(Object(c.jsx)(u.a,{store:L,children:Object(c.jsx)(J,{})}),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.1e90a321.chunk.js.map